!function(e){function r(e){BootstrapDialog.show({type:BootstrapDialog.TYPE_DANGER,title:'<i class="fa fa-times"></i> Error',message:e,buttons:[{label:"Ok",cssClass:"btn-danger",action:function(e){e.close()}}]})}function s(r,s){r.enableButtons(!0),r.setClosable(!0),e(".bootstrap-dialog").removeClass("type-info,type-default").addClass("type-danger"),e(".bootstrap-dialog-footer-buttons .btn").removeClass("btn-primary,btn-default").addClass("btn-danger"),e(".bootstrap-dialog-title").html('<i class="fa fa-times"></i> Error'),e(".bootstrap-dialog-message").html(s)}function t(r,s){r.enableButtons(!0),r.setClosable(!0),e(".bootstrap-dialog").removeClass("type-info,type-default").addClass("type-success"),e(".bootstrap-dialog-footer-buttons .btn").removeClass("btn-primary,btn-danger,btn-default").addClass("btn-success"),e(".bootstrap-dialog-title").html('<i class="fa fa-check"></i> Success'),e(".bootstrap-dialog-message").html(s)}e.fn.bindLuminateForm=function(s){var t=e.extend({onBeforeLuminateExtendSubmit:e.noop,customFormValidation:function(){return[]}},s||{}),i=e(this);return i.unbind("submit").bind("submit",function(s){var n=!1,a=[];i.find(".required").each(function(){var r=e(this).attr("name");if(e(this).parent(".input-group").removeClass("has-error"),e('label[for="'+r+'"]').removeClass("error"),"radio"===e(this).attr("type"))e('input[name="'+r+'"]:checked').val()||(e('label[for="'+r+'"]').addClass("error"),n=!0);else{var s=e.trim(e(this).val());""===s&&(e(this).parent(".input-group").addClass("has-error"),n=!0)}});var o=luminateExtend.utils.ensureArray(t.customFormValidation());if(o.length>0&&(n=!0,a.push(o)),n){if(a.length>0){var u;if(a.length>1){u=e("<ul></ul>");for(var l=0;l<a.length;l++)u.append(e("<li>"+a[l]+"</li>"))}else u=e('<div class="text-danger">'+a[0]+"</div>");r(u)}}else t.onBeforeLuminateExtendSubmit(),BootstrapDialog.show({type:BootstrapDialog.TYPE_INFO,closable:!1,title:'<i class="fa fa-cog fa-spin"></i> Submitting your request',message:"Please wait ...",buttons:[{label:"Close",cssClass:"btn-default",action:function(e){e.close()}}],onshown:function(e){window.luminateSubmitForm=i,window.luminateSubmitDialog=e,e.enableButtons(!1),i.unbind("submit"),luminateExtend.api.bind(),i.submit()}});s.preventDefault()}),i.hasClass("auto-submit")&&i.submit(),this},e.fn.bindSignupForm=function(){var r=e(this);return r.bindLuminateForm({customFormValidation:function(){var s=[],t=r.find('input[name="cons_email"]');return""===e.trim(t.val())&&s.push("Please enter your email address."),s}}),this},window.emailSignupCallback={error:function(e){s(window.luminateSubmitDialog,e.errorResponse.message)},success:function(r){if("false"==r.submitSurveyResponse.success){var i=luminateExtend.utils.ensureArray(r.submitSurveyResponse.errors),n="";e.each(i,function(){this.errorField&&(n+="<div>"+this.errorMessage+"</div>")}),s(window.luminateSubmitDialog,n)}else window.luminateSubmitForm.get(0).reset(),t(window.luminateSubmitDialog,"Thank you for signing up!");window.luminateSubmitForm.bindSignupForm()}},e(".js-signup-form").each(function(){e(this).bindSignupForm()})}(jQuery);